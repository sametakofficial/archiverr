# Archiverr Configuration - Plugin Architecture

options:
  debug: true
  dry_run: true
  hardlink: true

plugins:
  scanner:
    enabled: true
    targets:
      - "/home/samet/torrents/Mr. & Mrs. Smith (2005) BluRay 1080p DDP5.1 H.265 TSRG.mkv"
      - "/home/samet/torrents/A Beautiful Mind - Akıl Oyunları (2001) BR 1080p 10Bit x265 Dolby 5.1 [DUAL].mkv"
    recursive: false
  
  file_reader:
    enabled: true
    allow_virtual_paths: true
    targets:
      - "/media/shows/Breaking Bad S01E01.mkv"
      - "/home/samet/Workspace/archiverr/tests/targets.txt"
  
  ffprobe:
    enabled: true
    timeout: 15
  
  renamer:
    enabled: true
    media_type: "auto"  # auto, movie, show
  
  tmdb:
    enabled: true
    api_key: "ac7d9e25e603a7167f183ed446b58e8f"
    lang: "tr-TR"
    fallback_lang: "en-US"
    region: "TR"
    length_check: true
    extras:
      show_credits: true
      show_images: true
      show_videos: true
      show_keywords: true
      season_images: false
      episode_credits: true
      episode_images: false
      movie_credits: true
      movie_images: true
      movie_videos: true
      movie_keywords: true
  
  tvdb:
    enabled: true
    api_key: "ac27b346-7bec-4667-a4c9-51c82525c461"
    lang: "tr-TR"
    extras:
      show_cast: true            # /series/{id}/extended (people)
      show_crew: true            # /series/{id}/extended
      show_images: true          # /series/{id}/artworks
      show_videos: true          # /series/{id}/extended (trailers)
      show_keywords: true        # /series/{id}/extended (tags)
      season_images: true        # /seasons/{id}/extended
      episode_credits: true      # /episodes/{id}/extended
      episode_images: true       # /episodes/{id}/extended
      movie_credits: true        # /movies/{id}/extended
      movie_images: true         # /movies/{id}/extended
      movie_keywords: true       # /movies/{id}/extended
  
  omdb:
    enabled: true
    api_key: "3aed01a3"
  
  tvmaze:
    enabled: true
    extras:
      show_cast: true            # /shows/{id}/cast
      show_crew: true            # /shows/{id}/crew
      show_images: true          # /shows/{id}/images
      episode_guest_cast: true   # /episodes/{id}/guestcast
      episode_guest_crew: true   # /episodes/{id}/guestcrew
  
  mock_test:
    enabled: true

tasks:
  - name: "print_match_header"
    type: "print"
    template: |
      
      ========== MATCH {{ index }} ==========
  
  - name: "print_input"
    type: "print"
    template: |
      {% if scanner %}Input: {{ scanner.input }}{% elif file_reader %}Input: {{ file_reader.input }}{% endif %}
  
  - name: "print_movie"
    type: "print"
    condition: "{% if renamer and renamer.parsed and renamer.parsed.movie is not none and renamer.parsed.movie.name and renamer.parsed.movie.year %}"
    template: |
      MOVIE: {{ renamer.parsed.movie.name }} ({{ renamer.parsed.movie.year }})
      {% if tmdb and tmdb.movie %}TMDb Rating: {{ tmdb.movie.vote_average }}/10{% endif %}
      {% if omdb and omdb.movie %}OMDb Rating: {{ omdb.movie.imdb_rating }}{% endif %}
  
  - name: "print_show"
    type: "print"
    condition: "{% if renamer and renamer.parsed and renamer.parsed.show is not none and not (renamer.parsed.movie and renamer.parsed.movie.year) %}"
    template: |
      {% if renamer.parsed.show and renamer.parsed.show.name %}SHOW: {{ renamer.parsed.show.name }} S{{ '%02d' | format(renamer.parsed.show.season) }}E{{ '%02d' | format(renamer.parsed.show.episode) }}
      {% if tmdb and tmdb.episode %}TMDb Episode: {{ tmdb.episode.name }}{% endif %}
      {% if tvdb and tvdb.episode %}TVDb: {{ tvdb.episode.name }}{% endif %}
      {% if tvmaze and tvmaze.episode %}TVMaze: {{ tvmaze.episode.name }}{% endif %}{% endif %}
  
  - name: "print_mock"
    type: "print"
    condition: "{% if mock_test.mock_data %}"
    template: |
      Mock Test: {{ mock_test.mock_data.test_field }}
  
  - name: "print_variable_test"
    type: "print"
    condition: "{% if tmdb and tmdb.movie %}"
    template: |
      Variable Tests:
      - UPPERCASE: {{ tmdb.movie.name | upper }}
      - lowercase: {{ tmdb.movie.name | lower }}
      - Title Case: {{ tmdb.movie.name | title }}
      {% if tmdb.movie.genres %}- Genres (count): {{ tmdb.movie.genres | length }}
      - Genres (join): {{ tmdb.movie.genres | join(', ') }}{% endif %}
  
  - name: "print_extras"
    type: "print"
    template: |
      {% if tvdb and tvdb.extras %}TVDb Extras: {{ tvdb.extras | length }} items{% endif %}
      {% if tvmaze and tvmaze.extras %}TVMaze Extras: {{ tvmaze.extras | length }} items{% endif %}
      {% if omdb and omdb.movie and omdb.movie.awards %}OMDb Awards: {{ omdb.movie.awards }}{% endif %}
  
  - name: "print_plugins_status"
    type: "print"
    template: |
      Plugins: Success={{ matchGlobals.success_plugins | length }}, Failed={{ matchGlobals.failed_plugins | length }}, Not Supported={{ matchGlobals.not_supported_plugins | length }}
  
  - name: "dump_api_response"
    type: "print"
    condition: "{% if globals.current_match == (globals.total_matches - 1) %}"
    template: |
      
      ============================================================
      FULL API RESPONSE DUMP
      ============================================================
      {{ items | tojson(indent=2) }}
      
      ============================================================
      GLOBALS
      ============================================================
      {{ globals | tojson(indent=2) }}
      ============================================================
